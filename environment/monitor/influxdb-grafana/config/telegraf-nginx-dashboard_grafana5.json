{
   "meta":{
      "type":"db",
      "canSave":true,
      "canEdit":true,
      "canAdmin":true,
      "canStar":true,
      "slug":"nginx",
      "url":"/d/GqFjuAgmk/nginx",
      "expires":"0001-01-01T00:00:00Z",
      "created":"2018-04-22T19:09:56Z",
      "updated":"2018-04-22T19:47:04Z",
      "updatedBy":"rango",
      "createdBy":"rango",
      "version":3,
      "hasAcl":false,
      "isFolder":false,
      "folderId":0,
      "folderTitle":"General",
      "folderUrl":""
   },
   "dashboard":{
      "annotations":{
         "list":[
            {
               "builtIn":1,
               "datasource":"-- Grafana --",
               "enable":true,
               "hide":true,
               "iconColor":"rgba(0, 211, 255, 1)",
               "name":"Annotations \u0026 Alerts",
               "type":"dashboard"
            }
         ]
      },
      "description":"Performance metrics for Nginx",
      "editable":true,
      "gnetId":5063,
      "graphTooltip":0,
      "id":null,
      "iteration":1524426368722,
      "links":[

      ],
      "panels":[
         {
            "collapsed":false,
            "gridPos":{
               "h":1,
               "w":24,
               "x":0,
               "y":0
            },
            "id":13,
            "panels":[

            ],
            "repeat":"host",
            "scopedVars":{
               "host":{
                  "selected":true,
                  "text":"blog",
                  "value":"blog"
               }
            },
            "title":"Nginx $host",
            "type":"row"
         },
         {
            "aliasColors":{

            },
            "bars":false,
            "dashLength":10,
            "dashes":false,
            "datasource":"$datasource",
            "fill":1,
            "gridPos":{
               "h":9,
               "w":24,
               "x":0,
               "y":1
            },
            "id":31,
            "legend":{
               "alignAsTable":true,
               "avg":true,
               "current":true,
               "hideEmpty":true,
               "hideZero":true,
               "max":false,
               "min":false,
               "rightSide":false,
               "show":true,
               "total":true,
               "values":true
            },
            "lines":true,
            "linewidth":1,
            "links":[

            ],
            "nullPointMode":"null",
            "percentage":false,
            "pointradius":5,
            "points":false,
            "renderer":"flot",
            "scopedVars":{
               "host":{
                  "selected":true,
                  "text":"blog",
                  "value":"blog"
               }
            },
            "seriesOverrides":[

            ],
            "spaceLength":10,
            "stack":false,
            "steppedLine":false,
            "targets":[
               {
                  "alias":"HTTP 1xx",
                  "groupBy":[
                     {
                        "params":[
                           "$__interval"
                        ],
                        "type":"time"
                     }
                  ],
                  "measurement":"nginx_access_log",
                  "orderByTime":"ASC",
                  "policy":"default",
                  "query":"SELECT mean(\"resp_bytes\") FROM \"nginx_access_log\" WHERE (\"host\" =~ /^$host$/) AND $timeFilter GROUP BY time($__interval), \"host\", \"resp_code\" fill(null) SLIMIT 10",
                  "rawQuery":false,
                  "refId":"A",
                  "resultFormat":"time_series",
                  "select":[
                     [
                        {
                           "params":[
                              "resp_bytes"
                           ],
                           "type":"field"
                        },
                        {
                           "params":[

                           ],
                           "type":"mean"
                        }
                     ]
                  ],
                  "slimit":"",
                  "tags":[
                     {
                        "key":"host",
                        "operator":"=~",
                        "value":"/^$host$/"
                     },
                     {
                        "condition":"AND",
                        "key":"resp_code",
                        "operator":"=~",
                        "value":"/^1/"
                     }
                  ]
               },
               {
                  "alias":"HTTP  2xx",
                  "groupBy":[
                     {
                        "params":[
                           "$__interval"
                        ],
                        "type":"time"
                     }
                  ],
                  "measurement":"nginx_access_log",
                  "orderByTime":"ASC",
                  "policy":"default",
                  "query":"SELECT mean(\"resp_bytes\") FROM \"nginx_access_log\" WHERE (\"host\" =~ /^$host$/) AND $timeFilter GROUP BY time($__interval), \"host\", \"resp_code\" fill(null) SLIMIT 10",
                  "rawQuery":false,
                  "refId":"B",
                  "resultFormat":"time_series",
                  "select":[
                     [
                        {
                           "params":[
                              "resp_bytes"
                           ],
                           "type":"field"
                        },
                        {
                           "params":[

                           ],
                           "type":"mean"
                        }
                     ]
                  ],
                  "slimit":"",
                  "tags":[
                     {
                        "key":"host",
                        "operator":"=~",
                        "value":"/^$host$/"
                     },
                     {
                        "condition":"AND",
                        "key":"resp_code",
                        "operator":"=~",
                        "value":"/^2/"
                     }
                  ]
               },
               {
                  "alias":"HTTP  3xx",
                  "groupBy":[
                     {
                        "params":[
                           "$__interval"
                        ],
                        "type":"time"
                     }
                  ],
                  "measurement":"nginx_access_log",
                  "orderByTime":"ASC",
                  "policy":"default",
                  "query":"SELECT mean(\"resp_bytes\") FROM \"nginx_access_log\" WHERE (\"host\" =~ /^$host$/) AND $timeFilter GROUP BY time($__interval), \"host\", \"resp_code\" fill(null) SLIMIT 10",
                  "rawQuery":false,
                  "refId":"C",
                  "resultFormat":"time_series",
                  "select":[
                     [
                        {
                           "params":[
                              "resp_bytes"
                           ],
                           "type":"field"
                        },
                        {
                           "params":[

                           ],
                           "type":"mean"
                        }
                     ]
                  ],
                  "slimit":"",
                  "tags":[
                     {
                        "key":"host",
                        "operator":"=~",
                        "value":"/^$host$/"
                     },
                     {
                        "condition":"AND",
                        "key":"resp_code",
                        "operator":"=~",
                        "value":"/^3/"
                     }
                  ]
               },
               {
                  "alias":"HTTP  4xx",
                  "groupBy":[
                     {
                        "params":[
                           "$__interval"
                        ],
                        "type":"time"
                     }
                  ],
                  "measurement":"nginx_access_log",
                  "orderByTime":"ASC",
                  "policy":"default",
                  "query":"SELECT mean(\"resp_bytes\") FROM \"nginx_access_log\" WHERE (\"host\" =~ /^$host$/) AND $timeFilter GROUP BY time($__interval), \"host\", \"resp_code\" fill(null) SLIMIT 10",
                  "rawQuery":false,
                  "refId":"D",
                  "resultFormat":"time_series",
                  "select":[
                     [
                        {
                           "params":[
                              "resp_bytes"
                           ],
                           "type":"field"
                        },
                        {
                           "params":[

                           ],
                           "type":"mean"
                        }
                     ]
                  ],
                  "slimit":"",
                  "tags":[
                     {
                        "key":"host",
                        "operator":"=~",
                        "value":"/^$host$/"
                     },
                     {
                        "condition":"AND",
                        "key":"resp_code",
                        "operator":"=~",
                        "value":"/^4/"
                     }
                  ]
               },
               {
                  "alias":"HTTP  5xx",
                  "groupBy":[
                     {
                        "params":[
                           "$__interval"
                        ],
                        "type":"time"
                     }
                  ],
                  "measurement":"nginx_access_log",
                  "orderByTime":"ASC",
                  "policy":"default",
                  "query":"SELECT mean(\"resp_bytes\") FROM \"nginx_access_log\" WHERE (\"host\" =~ /^$host$/) AND $timeFilter GROUP BY time($__interval), \"host\", \"resp_code\" fill(null) SLIMIT 10",
                  "rawQuery":false,
                  "refId":"E",
                  "resultFormat":"time_series",
                  "select":[
                     [
                        {
                           "params":[
                              "resp_bytes"
                           ],
                           "type":"field"
                        },
                        {
                           "params":[

                           ],
                           "type":"mean"
                        }
                     ]
                  ],
                  "slimit":"",
                  "tags":[
                     {
                        "key":"host",
                        "operator":"=~",
                        "value":"/^$host$/"
                     },
                     {
                        "condition":"AND",
                        "key":"resp_code",
                        "operator":"=~",
                        "value":"/^5/"
                     }
                  ]
               }
            ],
            "thresholds":[

            ],
            "timeFrom":null,
            "timeShift":null,
            "title":"HTTP",
            "tooltip":{
               "shared":true,
               "sort":0,
               "value_type":"individual"
            },
            "type":"graph",
            "xaxis":{
               "buckets":null,
               "mode":"time",
               "name":null,
               "show":true,
               "values":[

               ]
            },
            "yaxes":[
               {
                  "format":"decbytes",
                  "label":null,
                  "logBase":1,
                  "max":null,
                  "min":null,
                  "show":true
               },
               {
                  "format":"short",
                  "label":null,
                  "logBase":1,
                  "max":null,
                  "min":null,
                  "show":true
               }
            ]
         },
         {
            "aliasColors":{

            },
            "bars":false,
            "dashLength":10,
            "dashes":false,
            "datasource":"$datasource",
            "fill":1,
            "gridPos":{
               "h":9,
               "w":24,
               "x":0,
               "y":10
            },
            "id":32,
            "legend":{
               "alignAsTable":true,
               "avg":true,
               "current":true,
               "hideEmpty":true,
               "hideZero":true,
               "max":false,
               "min":false,
               "rightSide":false,
               "show":true,
               "total":true,
               "values":true
            },
            "lines":true,
            "linewidth":1,
            "links":[

            ],
            "nullPointMode":"null",
            "percentage":false,
            "pointradius":5,
            "points":false,
            "renderer":"flot",
            "scopedVars":{
               "host":{
                  "selected":true,
                  "text":"blog",
                  "value":"blog"
               }
            },
            "seriesOverrides":[

            ],
            "spaceLength":10,
            "stack":false,
            "steppedLine":false,
            "targets":[
               {
                  "alias":"$tag_verb",
                  "groupBy":[
                     {
                        "params":[
                           "$__interval"
                        ],
                        "type":"time"
                     },
                     {
                        "params":[
                           "verb"
                        ],
                        "type":"tag"
                     }
                  ],
                  "measurement":"nginx_access_log",
                  "orderByTime":"ASC",
                  "policy":"default",
                  "query":"SELECT mean(\"resp_bytes\") FROM \"nginx_access_log\" WHERE (\"host\" =~ /^$host$/) AND $timeFilter GROUP BY time($__interval), \"host\", \"resp_code\" fill(null) SLIMIT 10",
                  "rawQuery":false,
                  "refId":"A",
                  "resultFormat":"time_series",
                  "select":[
                     [
                        {
                           "params":[
                              "request"
                           ],
                           "type":"field"
                        },
                        {
                           "params":[

                           ],
                           "type":"count"
                        }
                     ]
                  ],
                  "slimit":"",
                  "tags":[
                     {
                        "key":"host",
                        "operator":"=~",
                        "value":"/^$host$/"
                     }
                  ]
               }
            ],
            "thresholds":[

            ],
            "timeFrom":null,
            "timeShift":null,
            "title":"Queries",
            "tooltip":{
               "shared":true,
               "sort":0,
               "value_type":"individual"
            },
            "type":"graph",
            "xaxis":{
               "buckets":null,
               "mode":"time",
               "name":null,
               "show":true,
               "values":[

               ]
            },
            "yaxes":[
               {
                  "format":"none",
                  "label":null,
                  "logBase":1,
                  "max":null,
                  "min":null,
                  "show":true
               },
               {
                  "format":"short",
                  "label":null,
                  "logBase":1,
                  "max":null,
                  "min":null,
                  "show":true
               }
            ]
         },
         {
            "collapsed":false,
            "gridPos":{
               "h":1,
               "w":24,
               "x":0,
               "y":19
            },
            "id":15,
            "panels":[

            ],
            "repeat":"host",
            "scopedVars":{
               "host":{
                  "selected":true,
                  "text":"blog",
                  "value":"blog"
               }
            },
            "title":"Network $host",
            "type":"row"
         },
         {
            "aliasColors":{

            },
            "bars":false,
            "dashLength":10,
            "dashes":false,
            "datasource":"$datasource",
            "fill":1,
            "gridPos":{
               "h":5,
               "w":12,
               "x":0,
               "y":20
            },
            "id":17,
            "legend":{
               "avg":true,
               "current":true,
               "max":true,
               "min":false,
               "show":true,
               "total":false,
               "values":true
            },
            "lines":true,
            "linewidth":1,
            "links":[

            ],
            "nullPointMode":"null",
            "percentage":false,
            "pointradius":5,
            "points":false,
            "renderer":"flot",
            "scopedVars":{
               "host":{
                  "selected":true,
                  "text":"blog",
                  "value":"blog"
               }
            },
            "seriesOverrides":[

            ],
            "spaceLength":10,
            "stack":false,
            "steppedLine":false,
            "targets":[
               {
                  "alias":"activeopens",
                  "groupBy":[
                     {
                        "params":[
                           "$__interval"
                        ],
                        "type":"time"
                     },
                     {
                        "params":[
                           "null"
                        ],
                        "type":"fill"
                     }
                  ],
                  "measurement":"net",
                  "orderByTime":"ASC",
                  "policy":"default",
                  "refId":"A",
                  "resultFormat":"time_series",
                  "select":[
                     [
                        {
                           "params":[
                              "tcp_activeopens"
                           ],
                           "type":"field"
                        },
                        {
                           "params":[

                           ],
                           "type":"mean"
                        },
                        {
                           "params":[

                           ],
                           "type":"non_negative_difference"
                        }
                     ]
                  ],
                  "tags":[
                     {
                        "key":"host",
                        "operator":"=~",
                        "value":"/^$host$/"
                     }
                  ]
               },
               {
                  "alias":"estabresets",
                  "groupBy":[
                     {
                        "params":[
                           "$__interval"
                        ],
                        "type":"time"
                     },
                     {
                        "params":[
                           "null"
                        ],
                        "type":"fill"
                     }
                  ],
                  "measurement":"net",
                  "orderByTime":"ASC",
                  "policy":"default",
                  "refId":"B",
                  "resultFormat":"time_series",
                  "select":[
                     [
                        {
                           "params":[
                              "tcp_estabresets"
                           ],
                           "type":"field"
                        },
                        {
                           "params":[

                           ],
                           "type":"mean"
                        },
                        {
                           "params":[

                           ],
                           "type":"non_negative_difference"
                        }
                     ]
                  ],
                  "tags":[
                     {
                        "key":"host",
                        "operator":"=~",
                        "value":"/^$host$/"
                     }
                  ]
               }
            ],
            "thresholds":[

            ],
            "timeFrom":null,
            "timeShift":null,
            "title":"TCP",
            "tooltip":{
               "shared":true,
               "sort":0,
               "value_type":"individual"
            },
            "type":"graph",
            "xaxis":{
               "buckets":null,
               "mode":"time",
               "name":null,
               "show":true,
               "values":[

               ]
            },
            "yaxes":[
               {
                  "format":"short",
                  "label":null,
                  "logBase":1,
                  "max":null,
                  "min":null,
                  "show":true
               },
               {
                  "format":"short",
                  "label":null,
                  "logBase":1,
                  "max":null,
                  "min":null,
                  "show":true
               }
            ]
         },
         {
            "aliasColors":{

            },
            "bars":false,
            "dashLength":10,
            "dashes":false,
            "datasource":"$datasource",
            "fill":1,
            "gridPos":{
               "h":5,
               "w":12,
               "x":12,
               "y":20
            },
            "id":29,
            "legend":{
               "avg":true,
               "current":true,
               "max":true,
               "min":false,
               "show":true,
               "total":false,
               "values":true
            },
            "lines":true,
            "linewidth":1,
            "links":[

            ],
            "nullPointMode":"null",
            "percentage":false,
            "pointradius":5,
            "points":false,
            "renderer":"flot",
            "scopedVars":{
               "host":{
                  "selected":true,
                  "text":"blog",
                  "value":"blog"
               }
            },
            "seriesOverrides":[

            ],
            "spaceLength":10,
            "stack":false,
            "steppedLine":false,
            "targets":[
               {
                  "alias":"recv",
                  "groupBy":[
                     {
                        "params":[
                           "$__interval"
                        ],
                        "type":"time"
                     },
                     {
                        "params":[
                           "null"
                        ],
                        "type":"fill"
                     }
                  ],
                  "measurement":"net",
                  "orderByTime":"ASC",
                  "policy":"default",
                  "refId":"A",
                  "resultFormat":"time_series",
                  "select":[
                     [
                        {
                           "params":[
                              "bytes_recv"
                           ],
                           "type":"field"
                        },
                        {
                           "params":[

                           ],
                           "type":"mean"
                        },
                        {
                           "params":[

                           ],
                           "type":"non_negative_difference"
                        }
                     ]
                  ],
                  "tags":[
                     {
                        "key":"host",
                        "operator":"=~",
                        "value":"/^$host$/"
                     }
                  ]
               },
               {
                  "alias":"sent",
                  "groupBy":[
                     {
                        "params":[
                           "$__interval"
                        ],
                        "type":"time"
                     },
                     {
                        "params":[
                           "null"
                        ],
                        "type":"fill"
                     }
                  ],
                  "measurement":"net",
                  "orderByTime":"ASC",
                  "policy":"default",
                  "refId":"B",
                  "resultFormat":"time_series",
                  "select":[
                     [
                        {
                           "params":[
                              "bytes_sent"
                           ],
                           "type":"field"
                        },
                        {
                           "params":[

                           ],
                           "type":"mean"
                        },
                        {
                           "params":[

                           ],
                           "type":"non_negative_difference"
                        }
                     ]
                  ],
                  "tags":[
                     {
                        "key":"host",
                        "operator":"=~",
                        "value":"/^$host$/"
                     }
                  ]
               }
            ],
            "thresholds":[

            ],
            "timeFrom":null,
            "timeShift":null,
            "title":"Traf",
            "tooltip":{
               "shared":true,
               "sort":0,
               "value_type":"individual"
            },
            "type":"graph",
            "xaxis":{
               "buckets":null,
               "mode":"time",
               "name":null,
               "show":true,
               "values":[

               ]
            },
            "yaxes":[
               {
                  "format":"Bps",
                  "label":null,
                  "logBase":1,
                  "max":null,
                  "min":null,
                  "show":true
               },
               {
                  "format":"short",
                  "label":null,
                  "logBase":1,
                  "max":null,
                  "min":null,
                  "show":true
               }
            ]
         }
      ],
      "refresh":"5s",
      "schemaVersion":16,
      "style":"dark",
      "tags":[
         "Nginx",
         "InfluxDB",
         "Telegraf"
      ],
      "templating":{
         "list":[
            {
               "current":{
                  "text":"influx",
                  "value":"influx"
               },
               "datasource":null,
               "hide":0,
               "includeAll":false,
               "label":"",
               "multi":false,
               "name":"datasource",
               "options":[

               ],
               "query":"influxdb",
               "refresh":1,
               "regex":"",
               "type":"datasource"
            },
            {
               "allValue":null,
               "current":{
                  "tags":[

                  ],
                  "text":"blog",
                  "value":[
                     "blog"
                  ]
               },
               "datasource":"$datasource",
               "hide":0,
               "includeAll":false,
               "label":null,
               "multi":true,
               "name":"host",
               "options":[

               ],
               "query":"SHOW TAG VALUES FROM \"nginx\" WITH KEY = \"host\"",
               "refresh":1,
               "regex":"",
               "sort":0,
               "tagValuesQuery":"",
               "tags":[

               ],
               "tagsQuery":"",
               "type":"query",
               "useTags":false
            }
         ]
      },
      "time":{
         "from":"now-24h",
         "to":"now"
      },
      "timepicker":{
         "refresh_intervals":[
            "5s",
            "10s",
            "30s",
            "1m",
            "5m",
            "15m",
            "30m",
            "1h",
            "2h",
            "1d"
         ],
         "time_options":[
            "5m",
            "15m",
            "1h",
            "6h",
            "12h",
            "24h",
            "2d",
            "7d",
            "30d"
         ]
      },
      "timezone":"browser",
      "title":"Nginx",
      "uid":"GqFjuAgmk",
      "version":3
   }
}
